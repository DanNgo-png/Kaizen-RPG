<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo Lists - Kaizen RPG</title>
</head>

<body>
  <div class="todo-layout-container">

    <!-- SIDEBAR: Project Lists -->
    <aside class="todo-sidebar">
      <div class="todo-sidebar-header">
        <h3>Lists</h3>
        <button id="btn-add-list" class="btn-icon-sm" title="New List"><i class="fa-solid fa-plus"></i></button>
      </div>
      <div id="todo-lists-nav" class="lists-nav">
        <!-- Lists injected via JS -->
      </div>
    </aside>

    <main class="todo-main">
      <div class="todo-container">

        <!-- Header -->
        <header class="todo-header">
          <h2 id="active-list-title">
            <i class="fa-solid fa-inbox"></i> Inbox
          </h2>
        </header>

        <!-- Input Area -->
        <div class="input-group">
          <input type="text" id="new-task-input" class="todo-input" placeholder="What needs to be done?">
          <select id="priority-input" class="priority-select">
            <option value="p1">Priority 1 (Red)</option>
            <option value="p2">Priority 2 (Orange)</option>
            <option value="p3">Priority 3 (Blue)</option>
            <option value="p4" selected>Priority 4 (Default)</option>
          </select>
          <button id="add-task-btn" class="btn-add">Add Task</button>
        </div>

        <!-- Filter Tabs -->
        <div class="tabs">
          <button class="tab-btn active" data-filter="all">All Tasks <span class="count-badge">0</span></button>
          <button class="tab-btn" data-filter="pending">Pending <span class="count-badge">0</span></button>
          <button class="tab-btn" data-filter="completed">Completed <span class="count-badge">0</span></button>

          <!-- Delete List Button (Only visible for custom lists) -->
          <button id="btn-delete-list" class="btn-clear hidden"
            style="margin-right:10px; color:#ef4444; border-color:#ef4444;">
            <i class="fa-solid fa-trash"></i> Delete List
          </button>

          <button id="clear-completed-btn" class="btn-clear">
            <i class="fa-solid fa-broom"></i> Clear Completed
          </button>
        </div>

        <!-- Task List -->
        <div class="todolist-task-list" id="todo-list-container">
          <!-- Tasks injected here -->
        </div>

        <!-- TASK DETAILS MODAL -->
        <div id="todo-detail-modal" class="todo-modal-overlay hidden">

          <!-- 1. THE MAIN CARD -->
          <div id="todo-modal-card" class="todo-modal-card">
            <div class="todolist-modal-header">
              <h3 id="modal-task-title">Task Title</h3>
              <button id="btn-close-detail-modal" class="btn-icon">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>

            <div class="modal-body">
              <div class="modal-properties-grid">
                <!-- Priority -->
                <div class="prop-group">
                  <label class="detail-label"><i class="fa-solid fa-flag"></i> Priority</label>
                  <select id="modal-task-priority" class="modal-select">
                    <option value="p1">P1 - High</option>
                    <option value="p2">P2 - Medium</option>
                    <option value="p3">P3 - Low</option>
                    <option value="p4">P4 - None</option>
                  </select>
                </div>

                <!-- List -->
                <div class="prop-group">
                  <label class="detail-label"><i class="fa-solid fa-folder"></i> List</label>
                  <select id="modal-task-list" class="modal-select"></select>
                </div>

                <!-- Due Date Trigger (Full Width Row) -->
                <div class="prop-group" style="grid-column: 1 / -1;">
                  <label class="detail-label"><i class="fa-regular fa-calendar"></i> Due Date</label>
                  <!-- This button activates the sidecar -->
                  <button id="btn-trigger-date-sidecar" class="btn-date-trigger">
                    <span id="btn-date-text">Set Due Date</span>
                    <i class="fa-solid fa-chevron-right"></i>
                  </button>
                </div>
              </div>

              <label class="detail-label">Description</label>
              <textarea id="modal-task-desc" class="detail-textarea" placeholder="Add notes here..."></textarea>
            </div>

            <div class="modal-footer">
              <span id="modal-save-indicator" class="save-indicator"><i class="fa-solid fa-check"></i> Saved</span>
            </div>
          </div>

          <!-- 2. THE SIDECAR WIDGET (Initially Hidden) -->
          <div id="sidecar-date-picker" class="sidecar-container hidden">

            <div class="sidecar-header">
              <h4>Schedule</h4>
              <button id="btn-close-sidecar" class="btn-icon-xs"><i class="fa-solid fa-xmark"></i></button>
            </div>

            <!-- Input Row -->
            <div class="date-input-row compact">
              <input type="text" id="task-due-date-input" class="modern-input" placeholder="yyyy-mm-dd">
            </div>

            <!-- Quick Chips -->
            <div class="date-shortcuts">
              <button class="chip-btn" data-action="today">Today</button>
              <button class="chip-btn" data-action="tomorrow">Tmrw</button>
              <button class="chip-btn" data-action="weekend">Wknd</button>
            </div>

            <!-- Mini Calendar -->
            <div class="mini-calendar">
              <div class="cal-header">
                <span id="cal-month-year">Dec 2025</span>
                <div class="cal-nav">
                  <button id="cal-prev"><i class="fa-solid fa-chevron-left"></i></button>
                  <button id="cal-next"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
              </div>
              <div class="cal-weekdays">
                <span>S</span><span>M</span><span>T</span><span>W</span><span>T</span><span>F</span><span>S</span>
              </div>
              <div id="cal-days-grid" class="cal-days"></div>
            </div>

            <!-- Repeat Options (Compact footer) -->
            <div class="sidecar-footer">
              <button id="btn-toggle-repeat" class="btn-text-subtle">
                <i class="fa-solid fa-repeat"></i> <span id="repeat-label">No Repeat</span>
              </button>
              <!-- Simple Repeat Dropdown inside sidecar -->
              <div id="repeat-options-overlay" class="repeat-menu sidecar-repeat-menu hidden">
                <div class="repeat-option" data-val="daily">Daily</div>
                <div class="repeat-option" data-val="weekly" id="opt-weekly">Weekly</div>
                <div class="repeat-option" data-val="monthly" id="opt-monthly">Monthly</div>
                <button id="btn-clear-repeat" class="btn-text-danger hidden">Clear</button>
              </div>
            </div>

          </div>

        </div>
      </div>
  </div>
  </main>
  </div>
</body>

</html>