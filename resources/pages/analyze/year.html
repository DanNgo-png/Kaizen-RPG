<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yearly Analytics - Kaizen RPG</title>
</head>

<body>
  <div class="year-container">

    <!-- Header -->
    <div class="year-header">
      <h2>Yearly Analytics</h2>
      <div class="year-selector">
        <button id="year-btn-prev" class="year-btn"><i class="fa-solid fa-arrow-left"></i></button>
        <span id="year-display" class="current-year">...</span>
        <button id="year-btn-next" class="year-btn"><i class="fa-solid fa-arrow-right"></i></button>
      </div>
    </div>

    <!-- Top Section -->
    <div class="top-row">

      <!-- Statistics Card -->
      <div class="analytics-card">
        <div class="stats-grid">
          <!-- 1. Focus Time -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-blue"><i class="fa-regular fa-clock"></i></div>
            <div class="stat-text">
              <span class="stat-label text-blue">Focus Time</span>
              <span id="y-stat-time" class="stat-value">0h</span>
            </div>
          </div>

          <!-- 2. Sessions -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-purple"><i class="fa-solid fa-check-double"></i></div>
            <div class="stat-text">
              <span class="stat-label text-purple">Sessions</span>
              <span id="y-stat-sessions" class="stat-value">0</span>
            </div>
          </div>

          <!-- 3. Focus Days -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-green"><i class="fa-regular fa-calendar-check"></i></div>
            <div class="stat-text">
              <span class="stat-label text-green">Focus Days</span>
              <span id="y-stat-days" class="stat-value">0</span>
            </div>
          </div>

          <!-- 4. Avg Session -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-periwinkle"><i class="fa-solid fa-trophy"></i></div>
            <div class="stat-text">
              <span class="stat-label text-periwinkle">Avg Session</span>
              <span id="y-stat-avg" class="stat-value">0m</span>
            </div>
          </div>

          <!-- 5. Best Day -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-yellow"><i class="fa-solid fa-bolt"></i></div>
            <div class="stat-text">
              <span class="stat-label text-yellow">Best Day</span>
              <span id="y-stat-best-day" class="stat-value">-</span>
            </div>
          </div>

          <!-- 6. Best Week -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-orange"><i class="fa-solid fa-bullseye"></i></div>
            <div class="stat-text">
              <span class="stat-label text-orange">Best Week</span>
              <span id="y-stat-best-week" class="stat-value">-</span>
            </div>
          </div>

          <!-- 7. Best Month -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-red"><i class="fa-regular fa-calendar"></i></div>
            <div class="stat-text">
              <span class="stat-label text-red">Best Month</span>
              <span id="y-stat-best-month" class="stat-value">-</span>
            </div>
          </div>

          <!-- 8. Best Streak -->
          <div class="analyze-year-stat-item">
            <div class="stat-icon icon-pink"><i class="fa-solid fa-fire"></i></div>
            <div class="stat-text">
              <span class="stat-label text-pink">Longest Streak</span>
              <span id="y-stat-streak" class="stat-value">0 days</span>
            </div>
          </div>

        </div>
      </div>

      <!-- Chart Card -->
      <div class="analytics-card">
        <div class="chart-container">
          <div id="year-donut-chart" class="donut-chart">
            <div class="donut-hole"></div>
          </div>
          <div id="year-legend-container" class="chart-legend">
            <!-- Legend Injected Here -->
          </div>
        </div>
      </div>

    </div>

    <!-- Bottom Heatmap Card -->
    <div class="analytics-card" style="position: relative;">
      <div class="heatmap-wrapper">
        <div id="heatmap-grid" class="heatmap-container">
          <!-- Grid Generated by JS -->
        </div>
      </div>
      <!-- Dynamic Tooltip Container -->
      <div id="heatmap-tooltip" class="heatmap-tooltip hidden"></div>
    </div>

  </div>

  <!-- NAVIGATION MODAL (Hidden by default) -->
  <div id="year-nav-modal" class="modal-overlay hidden"
    style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:2500; display:flex; justify-content:center; align-items:center;">
    <div class="focus-flexible-modal-content"
      style="background:#1f2937; border:1px solid #374151; padding:30px; border-radius:12px; width:350px; text-align:center;">
      <h3 style="margin-top:0; color:#fff;">View Date</h3>
      <p style="color:#9ca3af; margin-bottom:25px;">Which view would you like to open for this date?</p>

      <div style="display:flex; flex-direction:column; gap:10px;">
        <button id="btn-nav-review" class="btn-primary"
          style="padding:12px; background:#3b82f6; border:none; color:white; border-radius:6px; cursor:pointer; font-family: var(--font-main);">
          <i class="fa-solid fa-clock-rotate-left"></i> Review Log
        </button>
        <button id="btn-nav-analyze" class="btn-primary"
          style="padding:12px; background:#10b981; border:none; color:white; border-radius:6px; cursor:pointer; font-family: var(--font-main);">
          <i class="fa-solid fa-chart-line"></i> Day Analytics
        </button>
        <button id="btn-nav-cancel" class="btn-secondary"
          style="padding:12px; background:transparent; border:1px solid #4b5563; color:#9ca3af; border-radius:6px; cursor:pointer; margin-top:10px;">
          Cancel
        </button>
      </div>
    </div>
  </div>

</body>

</html>